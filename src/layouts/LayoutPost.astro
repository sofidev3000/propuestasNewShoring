---
import TopBar from "@components/organisms/TopBar/TopBar.astro";
import BaseHead from "../components/BaseHead.astro";

import Logo from "@atoms/Logo/Logo.astro";
import Header from "@components/organisms/Header/Header.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../../consts";
import HeaderMobile from "@components/organisms/HeaderMobile/HeaderMobile.astro";
import Footer from "@organisms/Footer/Footer.astro";
import ButtonToTop from "@components/atoms/ButtonToTop/ButtonToTop.astro";
import BannerCoockies from "@components/atoms/BannerCoockies/BannerCoockies";

const {
  title = SITE_TITLE,
  description = SITE_DESCRIPTION,
  image = "../../public/img/city.jpg",
} = Astro.props;
---
<script>
  const shareButtons = document.querySelector("#shareBtns"); // Corrected selection

  window.addEventListener("scroll", () => {
    if (window.pageYOffset > 200) {
      shareButtons.classList.remove("opacity-0");  // Show when scrolled past 500px
      shareButtons.classList.add("opacity-100");
    } else {
      shareButtons.classList.remove("opacity-100"); // Hide when scrolled up
      shareButtons.classList.add("opacity-0");
    }
  });
</script>



<html lang="es">
  <head>
    <BaseHead />
    <!-- Primary Meta Tags -->
    <title>{title}</title>
    <meta name="title" content={title} />
    <meta name="description" content={description} />
  </head>

  <body>
    <BannerCoockies client:only = 'react' />
    <TopBar />
    <ul id="shareBtns" class="shareBtns opacity-0 p-2 fixed hidden xl:flex flex-col left-0 top-20  items-center gap-4 z-[1000]">
      <span class="text-xs mb-1 bg-[#000000ca] text-white rounded-md p-1">Compartir:</span>
      <li class="w-8 h-8 mr-2 bg-guardsman-red-500 rounded-full hover:scale-105 ">
        <a
          href="#"
          class="inline-flex items-center justify-center w-full h-full  *:fill-white"
          target="_blank"
          rel="nofollow"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="fill-[--guardsman-red-700]"
            width="10"
            height="16"
            viewBox="0 0 20 32"
            data-astro-cid-dv46nlzh
            ><path
              d="M17.446 18h-4.668v14H6.517V18H1.43v-5.791h5.087V7.795C6.517 2.774 9.508 0 14.084 0c2.192 0 4.484.391 4.484.391v4.931h-2.526c-2.489 0-3.265 1.544-3.265 3.129v3.758h5.557z"
              data-astro-cid-dv46nlzh></path></svg
          >
        </a>
      </li>
      <li class="w-8 h-8 mr-2 bg-guardsman-red-500 rounded-full hover:scale-105 ">
        <a
          href="#"
          class="inline-flex items-center justify-center w-full h-full  *:fill-white"
          target="_blank"
          rel="nofollow"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="fill-[--guardsman-red-700]"
            width="14"
            height="14"
            viewBox="0 0 32 32"
            data-astro-cid-dv46nlzh
            ><path
              d="M24.324 3h4.414l-9.636 11.012L30.437 29h-8.875l-6.957-9.086L6.656 29H2.238l10.305-11.781L1.676 3h9.097l6.282 8.305Zm-1.55 23.363h2.445L9.445 5.5H6.82Zm0 0"
            ></path></svg
          >
        </a>
      </li>
      <li class="w-8 h-8 mr-2 bg-guardsman-red-500 rounded-full hover:scale-105 ">
        <a
          href="#"
          class="inline-flex items-center justify-center w-full h-full  *:fill-white"
          target="_blank"
          rel="nofollow"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="fill-[--guardsman-red-700]"
            width="14"
            height="14"
            viewBox="0 0 32 32"
            ><path
              d="M6.268 28H.463V9.306h5.805V28zM3.362 6.756C1.506 6.756 0 5.219 0 3.362a3.362 3.362 0 0 1 6.724 0c0 1.856-1.506 3.394-3.362 3.394zM27.994 28h-5.793v-9.1c0-2.169-.044-4.95-3.018-4.95-3.018 0-3.481 2.356-3.481 4.794V28H9.903V9.306h5.567v2.55h.081c.775-1.469 2.668-3.019 5.492-3.019 5.875 0 6.955 3.869 6.955 8.894V28h-.006z"
            ></path></svg
          >
        </a>
      </li>
      <li class="w-8 h-8 mr-2 bg-guardsman-red-500 rounded-full hover:scale-105 ">
        <a
          href="#"
          class="inline-flex items-center justify-center w-full h-full  *:fill-white"
          target="_blank"
          rel="nofollow"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="fill-[--guardsman-red-700]"
            width="14"
            height="14"
            width="32"
            height="32"
            viewBox="0 0 32 32"
            ><path
              d="M23.806 6.069C26.425 8.694 28 12.175 28 15.882c0 7.65-6.363 13.875-14.006 13.875h-.006c-2.325 0-4.606-.581-6.631-1.688L.001 30l1.969-7.188a13.885 13.885 0 0 1-1.85-6.938c0-7.65 6.225-13.875 13.875-13.875 3.706 0 7.194 1.444 9.812 4.069zm-9.812 21.35c6.356 0 11.662-5.175 11.662-11.538.006-3.081-1.331-5.975-3.506-8.156S17.081 4.344 14 4.344c-6.362 0-11.537 5.175-11.537 11.531 0 2.181.606 4.3 1.762 6.138l.275.438-1.162 4.256L7.7 25.563l.419.25a11.512 11.512 0 0 0 5.875 1.606zm6.325-8.638c.344.169.575.256.656.412.088.144.088.838-.2 1.65s-1.669 1.55-2.338 1.65c-1.1.162-1.963.081-4.162-.869-3.481-1.506-5.75-5.006-5.925-5.238-.169-.231-1.412-1.881-1.412-3.588s.894-2.544 1.213-2.894c.319-.344.694-.431.925-.431s.462 0 .662.012c.213.012.5-.081.781.594.288.694.981 2.4 1.069 2.575s.144.375.031.606c-.663 1.325-1.375 1.281-1.019 1.894 1.344 2.306 2.681 3.106 4.719 4.125.344.175.55.144.75-.088.206-.238.869-1.012 1.1-1.363s.462-.294.781-.175c.319.113 2.025.95 2.369 1.125z"
            ></path></svg
          >
        </a>
      </li>
    </ul>
    <article
      class=`hidden md:flex logo w-full  justify-center items-center text-left`
    >
      <Logo hidden="hidden" />
    </article>
    <HeaderMobile />
    <Header />
    <ButtonToTop />
    <slot />
    <Footer />

    <script
      type="module"
      defer
      src="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.js"
    ></script>
    <script>
      import { initSend } from "@controllers/ApiSend";
      import { initAOS } from "@utils/aos";
      import { execLazyLoad } from "@controllers/ImageLazy";

      document.addEventListener("DOMContentLoaded", function () {
        execLazyLoad();
        initAOS();

        const form = document.querySelectorAll(".form-send");

        form.forEach((formItem) => {
          formItem.addEventListener("submit", function (event) {
            event.preventDefault();
            initSend(this as HTMLFormElement);
          });
        });
      });
    </script>
  </body>
</html>
